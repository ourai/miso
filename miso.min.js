/*!
 * Miso v0.4.1
 * https://github.com/ourai/miso
 *
 * Copyright Ourai Lin, http://ourai.ws/
 *
 * Date: 2015-07-20
 */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("Requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m;e={name:"Miso",version:"0.4.1"},m={}.toString,k={validator:function(){return!0}},l={types:{}},j=function(){var a,b,c,d,e;for(b="Boolean Number String Function Array Date RegExp Object".split(" "),c=function(a){var b,c;return l.types["[object "+a+"]"]=c=a.toLowerCase(),b="Number"===a?function(a){return isNaN(a)?!1:this.type(a)===c}:function(a){return this.type(a)===c},l.methods["is"+a]=b},d=0,e=b.length;e>d;d++)a=b[d],c(a);return l.types},i=function(a,b){return null==a?!1:Object.prototype.hasOwnProperty.call(a,b)},h=function(a,b,c,d){var e;null==d&&(d=!1);try{Object.defineProperty(a,b,{__proto__:null,writable:d,value:c})}catch(f){e=f,a[b]=c}return!0},g=function(a,b,c){var d;return d=l.methods,d.isArray(b)||d.isPlainObject(b)&&!d.isArray(b.handlers)?d.each(b,function(a){return g(null!=a?a.handlers:void 0,a,c)}):d.isPlainObject(b)&&d.isArray(b.handlers)&&d.each(a,function(a){return f(a,b,c)}),c},f=function(a,b,c){var d,e,f,g,h,j,m,n,o;if(g=a.name,f=l.methods,a.expose!==!1&&!f.isFunction(c[g])){for(d=a.handler,m=i(a,"value")?a.value:b.value,j=[a.validator,b.validator,k.validator,function(){return!0}],n=0,o=j.length;o>n&&(h=j[n],!f.isFunction(h));n++);e=function(){return f.isFunction(d)&&h.apply(c,arguments)===!0?d.apply(c,arguments):m},c[g]=e}return c},l.methods={extend:function(a,b){return this(a,null!=b?b:this)},mixin:function(){var a,b,c,d,e,f,g,h,i,j,k;for(a=arguments,g=a.length,k=a[0]||{},f=1,e=!1,"boolean"===this.type(k)&&(e=k,k=a[1]||{},f=2),"object"==typeof k||this.isFunction(k)||(k={}),1===g&&(k=this,f--);g>f;){if(i=a[f],null!=i)for(h in i)c=i[h],j=k[h],c!==k&&(e&&c&&(this.isPlainObject(c)||(d=this.isArray(c)))?(d?(d=!1,b=j&&this.isArray(j)?j:[]):b=j&&this.isPlainObject(j)?j:{},k[h]=this.mixin(e,b,c)):void 0!==c&&(k[h]=c));f++}return k},each:function(a,b){var c,d,e,f;if(this.isArray(a)||this.isArrayLike(a)||this.isString(a))for(d=0;d<a.length&&(c=this.isString(a)?a.charAt(d):a[d],b.apply(c,[c,d++,a])!==!1););else if(this.isObject(a)||this.isFunction(a))for(e in a)if(f=a[e],b.apply(f,[f,e,a])===!1)break;return a},type:function(a){var b;return b=0===arguments.length?null:null==a?String(a):l.types[m.call(a)]||"object"},slice:function(a,b,c){var d,e;return null==a?e=[]:(c=Number(c),d=[Number(b)||0],arguments.length>2&&!isNaN(c)&&d.push(c),e=[].slice.apply(a,d)),e},hasProp:function(a,b){return i.apply(this,[arguments.length<2?this:b,a])},namespace:function(b){var c,d;return c=arguments,d={},this.isPlainObject(b)||(b=c[c.length-1]===!0?a:this),this.each(c,function(a){return function(c){var e;return a.isString(c)&&/^[0-9A-Z_.]+[^_.]?$/i.test(c)&&(e=b,a.each(c.split("."),function(b,c,d){return null==e?!1:(a.hasProp(b,e)||(e[b]=c===d.length-1?null:{}),e=e[b],!0)}),d=e),!0}}(this)),d},isWindow:function(a){return a&&this.isObject(a)&&"setInterval"in a},isElement:function(a){return a&&this.isObject(a)&&1===a.nodeType},isNumeric:function(a){return!this.isArray(a)&&!isNaN(parseFloat(a))&&isFinite(a)},isInteger:function(a){return this.isNumeric(a)&&/^-?[1-9]\d*$/.test(a)},isPlainObject:function(a){var b,c;if(!a||!this.isObject(a)||a.nodeType||this.isWindow(a))return!1;try{if(a.constructor&&!this.hasProp("constructor",a)&&!this.hasProp("isPrototypeOf",a.constructor.prototype))return!1}catch(d){return b=d,!1}for(c in a);return void 0===c||this.hasProp(c,a)},isEmpty:function(a){var b,c;if(c=!1,null==a||""===a)c=!0;else if((this.isArray(a)||this.isArrayLike(a))&&0===a.length)c=!0;else if(this.isObject(a)){c=!0;for(b in a){c=!1;break}}return c},isArrayLike:function(a){var b,c;return c=!1,this.isObject(a)&&!this.isWindow(a)&&(b=a.length,(1===a.nodeType&&b||!this.isArray(a)&&!this.isFunction(a)&&(0===b||this.isNumber(b)&&b>0&&b-1 in a))&&(c=!0)),c},mask:function(b){var c,d,e;if(this.isString(b))if(this.hasProp(b,a))a.console&&console.error("'"+b+"' has existed as a property of Window object.");else{d=this.__meta__.name,a[b]=a[d];try{e=delete a[d]}catch(f){c=f,a[d]=void 0,e=!0}this.__meta__.name=b}else e=!1;return e},alias:function(b){return this.isString(b)&&void 0===a[b]&&(a[b]=this),a[String(b)]}},c=function(){function a(){this.platform=c(),this.browser=b()}var b,c,d,e,f,g,h,i;return e=navigator,i=e.userAgent.toLowerCase(),h={windows:{5.1:"XP",5.2:"XP x64 Edition","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1"}},f=function(){var a;return a=/^[\w.\/]+ \(([^;]+?)[;)]/.exec(i)[1].split(" ").shift(),"compatible"===a?"windows":a},g=function(){var a;return null!=(a=(/windows nt ([\w.]+)/.exec(i)||/os ([\w]+) like mac/.exec(i)||/mac os(?: [a-z]*)? ([\w.]+)/.exec(i)||[])[1])?a.replace(/_/g,"."):void 0},c=function(){var a;return a={touchable:!1,version:g()},a[f()]=!0,a.windows?(a.version=h.windows[a.version],a.touchable=/trident[ \/][\w.]+; touch/.test(i)):(a.ipod||a.iphone||a.ipad)&&(a.touchable=a.ios=!0),a},d=function(){var a,b,c;return a={},b=/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[],c={browser:b[1]||"",version:b[2]||"0"},c.browser&&(a[c.browser]=!0,a.version=c.version),a.chrome?a.webkit=!0:a.webkit&&(a.safari=!0),a},b=function(){var a,b;return b=/trident.*? rv:([\w.]+)/.exec(i),b?a={msie:!0,version:b[1]}:(a=d(),a.mozilla&&(a.firefox=!0,b=/firefox[ \/]([\w.]+)/.exec(i),b&&(a.version=b[1]))),a.language=e.language||e.browserLanguage,a},a}(),j(),d=function(a,b){return g(null!=a?a.handlers:void 0,a,null!=b?b:{})},l.methods.each(l.methods,function(a,b){d[b]=a}),d.mixin(new c),h(d,"__meta__",e,!0),a[e.name]=d});